#include <iostream>
using namespace std;

class maxHeap{
    int *arr;
    int size;
    int capp;

public:
    maxHeap(int s){
        capp = s;
        size = 0;
        arr = new int[capp + 1];
    }

    int getParent(int i){ return i / 2; }
    int getLeft(int i){ return 2 * i; }
    int getRight(int i){ return 2 * i + 1; }

    void insert(int val){
        if(size >= capp){
            cout << "Heap is FULL" << endl;
            return;
        }
        size++;
        int index = size;
        arr[index] = val;

        while(index > 1){
            int parent = getParent(index);
            if(arr[parent] < arr[index]){
                swap(arr[parent], arr[index]);
                index = parent;
            } else break;
        }
    }

    void deleteRoot(){
        if(size == 0){
            cout << "Heap is empty" << endl;
            return;
        }
        arr[1] = arr[size];
        size--;
        heapify(arr, size, 1);
    }

    void heapify(int *arr, int n, int i){
        int leftChild = getLeft(i);
        int rightChild = getRight(i);
        int largest = i;

        if(leftChild <= n && arr[largest] < arr[leftChild])
            largest = leftChild;
        if(rightChild <= n && arr[largest] < arr[rightChild])
            largest = rightChild;

        if(largest != i){
            swap(arr[largest], arr[i]);
            heapify(arr, n, largest);
        }
    }

    void heapSort(){
        int originalSize = size;
        for(int i = size; i > 1; i--){
            swap(arr[1], arr[i]);
            heapify(arr, i-1, 1);
        }
        size = originalSize; // restore original heap size
    }

    void print(){
        for(int i = 1; i <= size; i++)
            cout << arr[i] << " ";
        cout << endl;
    }
};

int main(){
    maxHeap h(10);
    h.insert(50);
    h.insert(30);
    h.insert(40);
    h.insert(10);
    h.insert(20);
    h.insert(60);
    h.insert(55);

    cout << "Heap: ";
    h.print();

    h.heapSort();
    cout << "Sorted: ";
    h.print();

    return 0;
}
